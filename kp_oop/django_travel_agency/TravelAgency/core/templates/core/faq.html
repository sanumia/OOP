{% extends 'core/base.html' %}
{% load static %}

{% block title %}Часто задаваемые вопросы | TravelDream{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Breadcrumbs -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'core:home' %}"><i class="fas fa-home"></i></a></li>
            <li class="breadcrumb-item active">FAQ</li>
        </ol>
    </nav>

    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h1 class="h2 mb-4">Часто задаваемые вопросы</h1>
                    
                    <!-- FAQ Categories -->
                    {% for category in faq_categories %}
                    <div class="faq-category mb-4">
                        <h2 class="h4 mb-3">{{ category.name }}</h2>
                        <div class="accordion" id="faqAccordion{{ forloop.counter }}">
                            {% for qa in category.questions %}
                            <div class="accordion-item">
                                <h3 class="accordion-header" id="heading{{ forloop.parentloop.counter }}{{ forloop.counter }}">
                                    <button class="accordion-button {% if not forloop.first %}collapsed{% endif %}" 
                                            type="button" 
                                            data-bs-toggle="collapse" 
                                            data-bs-target="#collapse{{ forloop.parentloop.counter }}{{ forloop.counter }}"
                                            aria-expanded="{% if forloop.first %}true{% else %}false{% endif %}"
                                            aria-controls="collapse{{ forloop.parentloop.counter }}{{ forloop.counter }}">
                                        {{ qa.q }}
                                    </button>
                                </h3>
                                <div id="collapse{{ forloop.parentloop.counter }}{{ forloop.counter }}" 
                                     class="accordion-collapse collapse {% if forloop.first %}show{% endif %}"
                                     aria-labelledby="heading{{ forloop.parentloop.counter }}{{ forloop.counter }}"
                                     data-bs-parent="#faqAccordion{{ forloop.parentloop.counter }}">
                                    <div class="accordion-body">
                                        {{ qa.a }}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endfor %}

                    <!-- Contact Section -->
                    <div class="mt-5 text-center">
                        <h3 class="h5 mb-3">Не нашли ответ на свой вопрос?</h3>
                        <p class="mb-4">Свяжитесь с нами, и мы с радостью поможем вам!</p>
                        <a href="{% url 'core:contact' %}" class="btn btn-primary">
                            <i class="fas fa-envelope me-2"></i>Связаться с нами
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.accordion-button:not(.collapsed) {
    background-color: #f8f9fa;
    color: #0d6efd;
}
.accordion-button:focus {
    box-shadow: none;
    border-color: rgba(0,0,0,.125);
}
</style>
{% endblock %} 